
 
 
== System Filter와 SystemSignalsOnly ==


시스템 필터 (System Filter)
- 이 시스템이 처리할 엔티티의 조건을 정의하는 것.

기본개념

ECS (Entity Component System)

게임 월드:
- 엔티티 1: [Transform, Player, Weapon]
- 엔티티 2: [Transform, Enemy, Health]
- 엔티티 3: [Transform, Item]
- 엔티티 4: [Player, Weapon] (Transform 없음)

문제 -> 모든 엔티티를 다 처리하면 비효율적임.

해결 : 필터로 한번 걸러서 필요한 것만 선택 

ex)

public unsafe class CharacterMovableSystem : SystemMainThreadFilter<CharacterMovableSystem.Filter>
{
    public struct Filter
    {
        public EntityRef Entity;
        public KCCMovement* KCC;
        public PlayerLink* PlayerLink;
    }
    
    public override void Update(Frame frame, ref Filter filter)
    {
        // KCC와 PlayerLink 둘 다 있는 엔티티만 여기 옴
        var input = frame.GetPlayerInput(filter.PlayerLink->Player);
        KCCMovementSystem.Move(frame, filter.Entity, input->Dir);
    }
}


필터의 역할:

게임 월드 검사:
- 엔티티 1: [KCC V, PlayerLink V] → 처리함!
- 엔티티 2: [KCC V, PlayerLink X] → 건너뜀
- 엔티티 3: [KCC X, PlayerLink V] → 건너뜀
- 엔티티 4: [KCC X, PlayerLink X] → 건너뜀

결과: 엔티티 1만 Update()에 전달됨



SystemSignalsOnly
- 시그널만 처리하는 시스템(이벤트 발생 시만, 시그널 발생 시만) [Update 메서드 없음]

ex) 점수, 사운드, 이펙트 등

